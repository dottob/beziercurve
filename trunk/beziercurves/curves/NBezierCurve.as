package beziercurves.curves {	import beziercurves.utils.PointArray;	import flash.geom.Point;	import flash.display.Sprite;	import beziercurves.utils.MathCurves;		/**	 * Copyright (c) 2008 nicolas levavasseur	 * nicolas.levavasseur@gmail.com	 * 	 * @author nicolas levavasseur	 */	public class NBezierCurve extends Sprite {		private var nPoints:int;		private var pArray:PointArray = new PointArray();		private var S:Array /* of Point */ = [];		private var thickness:int;		private var color:Number;		private var transparency:Number;		private var T:Array;						public function NBezierCurve(p0:Point, p1:Point, controls:Array /* of Point */, thickness:int, color:Number, transparency:Number, precision:int) {			this.thickness = thickness;			this.color = color;			this.transparency = transparency;						pArray = PointArray.copy(controls);			pArray.unshift(p0);			nPoints = pArray.push(p1);						T = MathCurves.knotVector(precision);						draw();		}				public function draw():void {			graphics.clear();			graphics.lineStyle(thickness, color, transparency);						for(var k:int = 0; k < T.length; k++){				S[k] = getNBezierPoint(k);								if( k == 0 ) graphics.moveTo(S[0].x, S[0].y);				else graphics.lineTo(S[k].x, S[k].y);			}		}				private function getNBezierPoint(k:int):Point {			var t:Number = T[k];						var p:Point = new Point();			for(var i:int = 0; i < nPoints; i++){				var r:Number = MathCurves.B(i, nPoints, t);				//var r:Number = MathCurves.N(i, T.length - 1 - nPoints - 1, t, T);				p = MathCurves.addPoints(p, MathCurves.multPoint(r, pArray[i]));			}			return p;		}	}}